==1758== Memcheck, a memory error detector
==1758== Copyright (C) 2002-2017, and GNU GPL'd, by Julian Seward et al.
==1758== Using Valgrind-3.14.0 and LibVEX; rerun with -h for copyright info
==1758== Command: ./PiSC
==1758== 
LOGGER: ProxyManager.cpp 22
send:  status = 416
Operation already in progress
LOGGER: ProxyManager.cpp 22
send:  status = 3866
Operation already in progress
LOGGER: ProxyManager.cpp 22
send:  status = 496
Operation already in progress
LOGGER: ProxyManager.cpp 22
send:  status = 494
Operation already in progress
LOGGER: receiver.cpp 76
LOGGER: receiver.cpp 76
LOGGER: ProxyManager.cpp 22
send:  status = 523
Operation already in progress
LOGGER: receiver.cpp 76
LOGGER: receiver.cpp 76
LOGGER: ProxyManager.cpp 22
send:  status = 477
Operation already in progress
LOGGER: receiver.cpp 76
LOGGER: receiver.cpp 76
LOGGER: ProxyManager.cpp 22
send:  status = 1274
Operation already in progress
LOGGER: ProxyManager.cpp 22
send:  status = 484
Operation already in progress
LOGGER: receiver.cpp 76
LOGGER: receiver.cpp 76
LOGGER: ProxyManager.cpp 22
send:  status = 35933
Operation already in progress
LOGGER: ProxyManager.cpp 22
send:  status = 485
Operation already in progress
LOGGER: ProxyManager.cpp 22
send:  status = 237
Operation already in progress
LOGGER: ProxyManager.cpp 22
send:  status = 477
Operation already in progress
LOGGER: ProxyManager.cpp 22
send:  status = 7339
Operation already in progress
LOGGER: ProxyManager.cpp 22
send:  status = 33972
Operation already in progress
LOGGER: receiver.cpp 76
LOGGER: receiver.cpp 76
==1758== Conditional jump or move depends on uninitialised value(s)
==1758==    at 0x4A943CB: std::ostreambuf_iterator<char, std::char_traits<char> > std::num_put<char, std::ostreambuf_iterator<char, std::char_traits<char> > >::_M_insert_int<long>(std::ostreambuf_iterator<char, std::char_traits<char> >, std::ios_base&, char, long) const (in /usr/lib/x86_64-linux-gnu/libstdc++.so.6.0.25)
==1758==    by 0x4A9FFB4: std::ostream& std::ostream::_M_insert<long>(long) (in /usr/lib/x86_64-linux-gnu/libstdc++.so.6.0.25)
==1758==    by 0x122E25: Server::recv(int) (server.cpp:261)
==1758==    by 0x122482: Server::startPoll() (server.cpp:99)
==1758==    by 0x12228C: Server::listen() (server.cpp:73)
==1758==    by 0x12084B: main (main.cpp:17)
==1758==  Uninitialised value was created by a stack allocation
==1758==    at 0x1298A7: Proxy::ProxyManager::addEndBodyMethod(int, int, std::map<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, std::less<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > >, std::allocator<std::pair<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > > > >) (ProxyManager.cpp:65)
==1758== 
==1758== Use of uninitialised value of size 8
==1758==    at 0x4A93EDE: ??? (in /usr/lib/x86_64-linux-gnu/libstdc++.so.6.0.25)
==1758==    by 0x4A943F4: std::ostreambuf_iterator<char, std::char_traits<char> > std::num_put<char, std::ostreambuf_iterator<char, std::char_traits<char> > >::_M_insert_int<long>(std::ostreambuf_iterator<char, std::char_traits<char> >, std::ios_base&, char, long) const (in /usr/lib/x86_64-linux-gnu/libstdc++.so.6.0.25)
==1758==    by 0x4A9FFB4: std::ostream& std::ostream::_M_insert<long>(long) (in /usr/lib/x86_64-linux-gnu/libstdc++.so.6.0.25)
==1758==    by 0x122E25: Server::recv(int) (server.cpp:261)
==1758==    by 0x122482: Server::startPoll() (server.cpp:99)
==1758==    by 0x12228C: Server::listen() (server.cpp:73)
==1758==    by 0x12084B: main (main.cpp:17)
==1758==  Uninitialised value was created by a stack allocation
==1758==    at 0x1298A7: Proxy::ProxyManager::addEndBodyMethod(int, int, std::map<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, std::less<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > >, std::allocator<std::pair<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > > > >) (ProxyManager.cpp:65)
==1758== 
==1758== Conditional jump or move depends on uninitialised value(s)
==1758==    at 0x4A93EEB: ??? (in /usr/lib/x86_64-linux-gnu/libstdc++.so.6.0.25)
==1758==    by 0x4A943F4: std::ostreambuf_iterator<char, std::char_traits<char> > std::num_put<char, std::ostreambuf_iterator<char, std::char_traits<char> > >::_M_insert_int<long>(std::ostreambuf_iterator<char, std::char_traits<char> >, std::ios_base&, char, long) const (in /usr/lib/x86_64-linux-gnu/libstdc++.so.6.0.25)
==1758==    by 0x4A9FFB4: std::ostream& std::ostream::_M_insert<long>(long) (in /usr/lib/x86_64-linux-gnu/libstdc++.so.6.0.25)
==1758==    by 0x122E25: Server::recv(int) (server.cpp:261)
==1758==    by 0x122482: Server::startPoll() (server.cpp:99)
==1758==    by 0x12228C: Server::listen() (server.cpp:73)
==1758==    by 0x12084B: main (main.cpp:17)
==1758==  Uninitialised value was created by a stack allocation
==1758==    at 0x1298A7: Proxy::ProxyManager::addEndBodyMethod(int, int, std::map<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, std::less<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > >, std::allocator<std::pair<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > > > >) (ProxyManager.cpp:65)
==1758== 
==1758== Conditional jump or move depends on uninitialised value(s)
==1758==    at 0x4A94427: std::ostreambuf_iterator<char, std::char_traits<char> > std::num_put<char, std::ostreambuf_iterator<char, std::char_traits<char> > >::_M_insert_int<long>(std::ostreambuf_iterator<char, std::char_traits<char> >, std::ios_base&, char, long) const (in /usr/lib/x86_64-linux-gnu/libstdc++.so.6.0.25)
==1758==    by 0x4A9FFB4: std::ostream& std::ostream::_M_insert<long>(long) (in /usr/lib/x86_64-linux-gnu/libstdc++.so.6.0.25)
==1758==    by 0x122E25: Server::recv(int) (server.cpp:261)
==1758==    by 0x122482: Server::startPoll() (server.cpp:99)
==1758==    by 0x12228C: Server::listen() (server.cpp:73)
==1758==    by 0x12084B: main (main.cpp:17)
==1758==  Uninitialised value was created by a stack allocation
==1758==    at 0x1298A7: Proxy::ProxyManager::addEndBodyMethod(int, int, std::map<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, std::less<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > >, std::allocator<std::pair<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > > > >) (ProxyManager.cpp:65)
==1758== 
==1758== Conditional jump or move depends on uninitialised value(s)
==1758==    at 0x4A943CB: std::ostreambuf_iterator<char, std::char_traits<char> > std::num_put<char, std::ostreambuf_iterator<char, std::char_traits<char> > >::_M_insert_int<long>(std::ostreambuf_iterator<char, std::char_traits<char> >, std::ios_base&, char, long) const (in /usr/lib/x86_64-linux-gnu/libstdc++.so.6.0.25)
==1758==    by 0x4A9FFB4: std::ostream& std::ostream::_M_insert<long>(long) (in /usr/lib/x86_64-linux-gnu/libstdc++.so.6.0.25)
==1758==    by 0x122E5F: Server::recv(int) (server.cpp:262)
==1758==    by 0x122482: Server::startPoll() (server.cpp:99)
==1758==    by 0x12228C: Server::listen() (server.cpp:73)
==1758==    by 0x12084B: main (main.cpp:17)
==1758==  Uninitialised value was created by a stack allocation
==1758==    at 0x1298A7: Proxy::ProxyManager::addEndBodyMethod(int, int, std::map<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, std::less<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > >, std::allocator<std::pair<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > > > >) (ProxyManager.cpp:65)
==1758== 
==1758== Use of uninitialised value of size 8
==1758==    at 0x4A93EDE: ??? (in /usr/lib/x86_64-linux-gnu/libstdc++.so.6.0.25)
==1758==    by 0x4A943F4: std::ostreambuf_iterator<char, std::char_traits<char> > std::num_put<char, std::ostreambuf_iterator<char, std::char_traits<char> > >::_M_insert_int<long>(std::ostreambuf_iterator<char, std::char_traits<char> >, std::ios_base&, char, long) const (in /usr/lib/x86_64-linux-gnu/libstdc++.so.6.0.25)
==1758==    by 0x4A9FFB4: std::ostream& std::ostream::_M_insert<long>(long) (in /usr/lib/x86_64-linux-gnu/libstdc++.so.6.0.25)
==1758==    by 0x122E5F: Server::recv(int) (server.cpp:262)
==1758==    by 0x122482: Server::startPoll() (server.cpp:99)
==1758==    by 0x12228C: Server::listen() (server.cpp:73)
==1758==    by 0x12084B: main (main.cpp:17)
==1758==  Uninitialised value was created by a stack allocation
==1758==    at 0x1298A7: Proxy::ProxyManager::addEndBodyMethod(int, int, std::map<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, std::less<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > >, std::allocator<std::pair<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > > > >) (ProxyManager.cpp:65)
==1758== 
==1758== Conditional jump or move depends on uninitialised value(s)
==1758==    at 0x4A93EEB: ??? (in /usr/lib/x86_64-linux-gnu/libstdc++.so.6.0.25)
==1758==    by 0x4A943F4: std::ostreambuf_iterator<char, std::char_traits<char> > std::num_put<char, std::ostreambuf_iterator<char, std::char_traits<char> > >::_M_insert_int<long>(std::ostreambuf_iterator<char, std::char_traits<char> >, std::ios_base&, char, long) const (in /usr/lib/x86_64-linux-gnu/libstdc++.so.6.0.25)
==1758==    by 0x4A9FFB4: std::ostream& std::ostream::_M_insert<long>(long) (in /usr/lib/x86_64-linux-gnu/libstdc++.so.6.0.25)
==1758==    by 0x122E5F: Server::recv(int) (server.cpp:262)
==1758==    by 0x122482: Server::startPoll() (server.cpp:99)
==1758==    by 0x12228C: Server::listen() (server.cpp:73)
==1758==    by 0x12084B: main (main.cpp:17)
==1758==  Uninitialised value was created by a stack allocation
==1758==    at 0x1298A7: Proxy::ProxyManager::addEndBodyMethod(int, int, std::map<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, std::less<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > >, std::allocator<std::pair<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > > > >) (ProxyManager.cpp:65)
==1758== 
==1758== Conditional jump or move depends on uninitialised value(s)
==1758==    at 0x4A94427: std::ostreambuf_iterator<char, std::char_traits<char> > std::num_put<char, std::ostreambuf_iterator<char, std::char_traits<char> > >::_M_insert_int<long>(std::ostreambuf_iterator<char, std::char_traits<char> >, std::ios_base&, char, long) const (in /usr/lib/x86_64-linux-gnu/libstdc++.so.6.0.25)
==1758==    by 0x4A9FFB4: std::ostream& std::ostream::_M_insert<long>(long) (in /usr/lib/x86_64-linux-gnu/libstdc++.so.6.0.25)
==1758==    by 0x122E5F: Server::recv(int) (server.cpp:262)
==1758==    by 0x122482: Server::startPoll() (server.cpp:99)
==1758==    by 0x12228C: Server::listen() (server.cpp:73)
==1758==    by 0x12084B: main (main.cpp:17)
==1758==  Uninitialised value was created by a stack allocation
==1758==    at 0x1298A7: Proxy::ProxyManager::addEndBodyMethod(int, int, std::map<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, std::less<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > >, std::allocator<std::pair<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > > > >) (ProxyManager.cpp:65)
==1758== 
==1758== Conditional jump or move depends on uninitialised value(s)
==1758==    at 0x122FBB: Server::recv(int) (server.cpp:272)
==1758==    by 0x122482: Server::startPoll() (server.cpp:99)
==1758==    by 0x12228C: Server::listen() (server.cpp:73)
==1758==    by 0x12084B: main (main.cpp:17)
==1758==  Uninitialised value was created by a stack allocation
==1758==    at 0x1298A7: Proxy::ProxyManager::addEndBodyMethod(int, int, std::map<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, std::less<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > >, std::allocator<std::pair<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > > > >) (ProxyManager.cpp:65)
==1758== 
LOGGER: ProxyManager.cpp 22
send:  status = 484
Operation already in progress
LOGGER: ProxyManager.cpp 22
send:  status = 491
Operation already in progress
LOGGER: receiver.cpp 76
LOGGER: receiver.cpp 76
LOGGER: ProxyManager.cpp 22
send:  status = 484
Operation already in progress
LOGGER: ProxyManager.cpp 22
send:  status = 4295
Operation already in progress
LOGGER: ProxyManager.cpp 22
send:  status = 495
Operation already in progress
LOGGER: receiver.cpp 76
LOGGER: receiver.cpp 76
LOGGER: ProxyManager.cpp 22
send:  status = 289
Operation already in progress
LOGGER: receiver.cpp 37
recv status = 0
Operation already in progress
LOGGER: ProxyManager.cpp 22
send:  status = 484
Operation already in progress
LOGGER: receiver.cpp 76
LOGGER: receiver.cpp 76
LOGGER: receiver.cpp 76
==1758== Invalid write of size 8
==1758==    at 0x1273F7: void __gnu_cxx::new_allocator<std::pair<int, sockaddr_in> >::construct<std::pair<int, sockaddr_in>, std::pair<int, sockaddr_in> >(std::pair<int, sockaddr_in>*, std::pair<int, sockaddr_in>&&) (new_allocator.h:136)
==1758==    by 0x1268C7: void std::allocator_traits<std::allocator<std::pair<int, sockaddr_in> > >::construct<std::pair<int, sockaddr_in>, std::pair<int, sockaddr_in> >(std::allocator<std::pair<int, sockaddr_in> >&, std::pair<int, sockaddr_in>*, std::pair<int, sockaddr_in>&&) (alloc_traits.h:475)
==1758==    by 0x125AD5: std::pair<int, sockaddr_in>& std::vector<std::pair<int, sockaddr_in>, std::allocator<std::pair<int, sockaddr_in> > >::emplace_back<std::pair<int, sockaddr_in> >(std::pair<int, sockaddr_in>&&) (vector.tcc:103)
==1758==    by 0x124F29: std::vector<std::pair<int, sockaddr_in>, std::allocator<std::pair<int, sockaddr_in> > >::push_back(std::pair<int, sockaddr_in>&&) (stl_vector.h:1091)
==1758==    by 0x1227E3: Server::accept() (server.cpp:142)
==1758==    by 0x122469: Server::startPoll() (server.cpp:95)
==1758==    by 0x12228C: Server::listen() (server.cpp:73)
==1758==    by 0x12084B: main (main.cpp:17)
==1758==  Address 0x6d83718 is 24 bytes after a block of size 64 in arena "client"
==1758== 

valgrind: m_mallocfree.c:307 (get_bszB_as_is): Assertion 'bszB_lo == bszB_hi' failed.
valgrind: Heap block lo/hi size mismatch: lo = 128, hi = 16187907394196471816.
This is probably caused by your program erroneously writing past the
end of a heap block and corrupting heap metadata.  If you fix any
invalid writes reported by Memcheck, this assertion failure will
probably go away.  Please try that before reporting this as a bug.


host stacktrace:
==1758==    at 0x580480A4: show_sched_status_wrk (m_libcassert.c:369)
==1758==    by 0x580481B7: report_and_quit (m_libcassert.c:440)
==1758==    by 0x58048349: vgPlain_assert_fail (m_libcassert.c:506)
==1758==    by 0x58052410: get_bszB_as_is (m_mallocfree.c:305)
==1758==    by 0x58052410: get_bszB (m_mallocfree.c:315)
==1758==    by 0x58052410: get_pszB (m_mallocfree.c:389)
==1758==    by 0x58052410: vgPlain_describe_arena_addr (m_mallocfree.c:1592)
==1758==    by 0x5803DE6A: vgPlain_describe_addr (m_addrinfo.c:187)
==1758==    by 0x5803CCD6: vgMemCheck_update_Error_extra (mc_errors.c:1187)
==1758==    by 0x58041DB4: vgPlain_maybe_record_error (m_errormgr.c:823)
==1758==    by 0x5803C15B: vgMemCheck_record_address_error (mc_errors.c:767)
==1758==    by 0x100A21591C: ???
==1758==    by 0x1008EADF2F: ???
==1758==    by 0x100200859F: ???
==1758==    by 0x1008EADF17: ???
==1758==    by 0x1008EADF2F: ???
==1758==    by 0x1008EADF3F: ???
==1758==    by 0x592B4BBF: ???
==1758==    by 0x100948AFFF: ???
==1758==    by 0x170F1: ???

sched status:
  running_tid=1

Thread 1: status = VgTs_Runnable (lwpid 1758)
==1758==    at 0x1273FA: void __gnu_cxx::new_allocator<std::pair<int, sockaddr_in> >::construct<std::pair<int, sockaddr_in>, std::pair<int, sockaddr_in> >(std::pair<int, sockaddr_in>*, std::pair<int, sockaddr_in>&&) (new_allocator.h:136)
==1758==    by 0x1268C7: void std::allocator_traits<std::allocator<std::pair<int, sockaddr_in> > >::construct<std::pair<int, sockaddr_in>, std::pair<int, sockaddr_in> >(std::allocator<std::pair<int, sockaddr_in> >&, std::pair<int, sockaddr_in>*, std::pair<int, sockaddr_in>&&) (alloc_traits.h:475)
==1758==    by 0x125AD5: std::pair<int, sockaddr_in>& std::vector<std::pair<int, sockaddr_in>, std::allocator<std::pair<int, sockaddr_in> > >::emplace_back<std::pair<int, sockaddr_in> >(std::pair<int, sockaddr_in>&&) (vector.tcc:103)
==1758==    by 0x124F29: std::vector<std::pair<int, sockaddr_in>, std::allocator<std::pair<int, sockaddr_in> > >::push_back(std::pair<int, sockaddr_in>&&) (stl_vector.h:1091)
==1758==    by 0x1227E3: Server::accept() (server.cpp:142)
==1758==    by 0x122469: Server::startPoll() (server.cpp:95)
==1758==    by 0x12228C: Server::listen() (server.cpp:73)
==1758==    by 0x12084B: main (main.cpp:17)
client stack range: [0x1FFEFFC000 0x1FFF000FFF] client SP: 0x1FFEFFFC40
valgrind stack range: [0x1008DAE000 0x1008EADFFF] top usage: 18568 of 1048576


Note: see also the FAQ in the source distribution.
It contains workarounds to several common problems.
In particular, if Valgrind aborted or crashed after
identifying problems in your program, there's a good chance
that fixing those problems will prevent Valgrind aborting or
crashing, especially if it happened in m_mallocfree.c.

If that doesn't help, please report this bug to: www.valgrind.org

In the bug report, send all the above text, the valgrind
version, and what OS and version you are using.  Thanks.

make: *** [makefile:29: valgrind] Error 1
